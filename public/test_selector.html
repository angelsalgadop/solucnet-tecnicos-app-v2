<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TEST - Selector de Tipo de Equipo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="alert alert-info">
            <h4>üß™ P√°gina de Prueba - Selector de Tipo de Equipo</h4>
            <p>Esta p√°gina es para verificar que el selector de MODEM/TV BOX se est√° cargando correctamente.</p>
        </div>

        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5>Instrucciones</h5>
            </div>
            <div class="card-body">
                <ol>
                    <li>Abre la <strong>Consola de Desarrollador</strong> (F12 o clic derecho > Inspeccionar > Consola)</li>
                    <li>Busca el mensaje: <code>üîß serial_scanner_native.js CARGADO - Versi√≥n: 1761679244</code></li>
                    <li>Haz clic en el bot√≥n "Abrir Modal de Serial" abajo</li>
                    <li>Haz clic en "Escribir" para ingresar un serial manual</li>
                    <li>Escribe cualquier serial (ej: TEST123456) y confirma</li>
                    <li><strong>DEBES VER</strong> un selector con dos opciones: <strong>MODEM</strong> y <strong>TV BOX</strong></li>
                </ol>
            </div>
        </div>

        <div class="mt-4">
            <button class="btn btn-primary btn-lg" onclick="abrirModalSerialEquipo(999, 'Prueba')">
                <i class="fas fa-barcode"></i> Abrir Modal de Serial
            </button>
        </div>

        <div class="mt-4">
            <div class="card">
                <div class="card-header bg-success text-white">
                    <h6>Estado de Carga</h6>
                </div>
                <div class="card-body">
                    <div id="estadoCarga">
                        <p><i class="fas fa-spinner fa-spin"></i> Cargando scripts...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/serial_scanner_native.js?v=1761679244"></script>

    <script>
        // Verificar que el script se carg√≥
        setTimeout(() => {
            const estadoDiv = document.getElementById('estadoCarga');
            if (typeof abrirModalSerialEquipo === 'function') {
                estadoDiv.innerHTML = `
                    <div class="alert alert-success">
                        <i class="fas fa-check-circle"></i> <strong>‚úÖ Script cargado correctamente</strong><br>
                        <small>Funci√≥n abrirModalSerialEquipo est√° disponible</small><br>
                        <small>Variable tipoEquipoCapturado: ${window.tipoEquipoCapturado || 'NO DEFINIDA'}</small>
                    </div>
                `;
            } else {
                estadoDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <i class="fas fa-times-circle"></i> <strong>‚ùå Error: Script no cargado</strong><br>
                        <small>La funci√≥n abrirModalSerialEquipo no est√° disponible</small>
                    </div>
                `;
            }
        }, 1000);

        // Mock de funciones necesarias
        window.mostrarInputManual = function() {
            document.getElementById('opcionesCaptura').classList.add('d-none');
            document.getElementById('inputManualSerial').classList.remove('d-none');
        };

        window.habilitarBotonSerial = function() {
            const serial = document.getElementById('serialManual')?.value?.trim();
            const btn = document.getElementById('btnConfirmarSerial');
            if (serial && serial.length >= 6) {
                btn.disabled = false;
                btn.classList.remove('btn-secondary');
                btn.classList.add('btn-primary');
            }
        };
    </script>
</body>
</html>
