<body>
    <!-- Pantalla de login -->
    <div class="login-container" id="login-container">
        <div class="login-card">
            <div class="login-header">
                <h2><i class="fab fa-whatsapp"></i> SOLUCNET</h2>
                <p>Panel de Control WhatsApp</p>
            </div>

            <form class="login-form" id="login-form">
                <div class="form-group">
                    <label for="username">Usuario</label>
                    <input type="text" id="username" name="username" required autocomplete="username">
                </div>

                <div class="form-group">
                    <label for="password">Contrase�a</label>
                    <input type="password" id="password" name="password" required autocomplete="current-password">
                </div>

                <div class="login-error" id="login-error"></div>

                <button type="submit" class="login-btn" id="login-btn">
                    <i class="fas fa-sign-in-alt"></i> Iniciar Sesi�n
                </button>
            </form>

            <div class="login-info">
                <strong>Usuarios disponibles:</strong><br>
                � Usuario: <strong>admin</strong> / Contrase�a: <strong>admin123</strong> (Administrador)<br>
                � Usuario: <strong>soporte</strong> / Contrase�a: <strong>soporte123</strong> (Soporte)
            </div>
        </div>
    </div>

    <!-- Contenedor principal de la aplicaci�n -->
    <div class="container" id="main-container" style="display: none;">
        <!-- Header principal -->
        <div class="main-header">
            <div class="header-left">
                <button class="sidebar-toggle-btn" id="sidebar-toggle-btn" title="Mostrar/Ocultar Panel">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-logo">
                    <i class="fab fa-whatsapp"></i>
                    SOLUCNET
                </div>
            </div>
            <div class="header-right">
                <button class="user-info-btn" id="admin-visits-btn" title="Gestión de Visitas - Panel de Administración">
                    <i class="fas fa-users-cog"></i>
                    <span>Gestión de Visitas</span>
                </button>
                <div class="session-counter" id="session-counter" title="Tiempo restante de sesión">
                    <i class="fas fa-clock"></i>
                    <span id="session-time">15:00</span>
                </div>
                <button class="scan-qr-btn" id="scan-qr-btn" title="Escanear código QR de WhatsApp">
                    <i class="fas fa-qrcode"></i>
                    <span>Escanear QR</span>
                </button>
                <button class="logout-btn" id="logout-btn" title="Cerrar sesi�n">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Salir</span>
                </button>
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header" onclick="toggleSidebar()">
                <div>
                    <h1><i class="fab fa-whatsapp"></i> SOLUCNET</h1>
                    <div class="status">
                        <span class="status-indicator status-offline" id="connection-status"></span>
                        <span id="status-text">Conectando...</span>
                    </div>
                    </div>
                </div>
                
            <!-- Botones del panel -->
                <div class="panel-buttons">
                <button class="panel-btn btn-health" onclick="showHealthDashboard()" title="Dashboard de Salud del Bot">
                        <i class="fas fa-heartbeat"></i>
                        <span>Salud Bot</span>
                    </button>
                <button class="panel-btn btn-omitted" onclick="showOmittedModal()" title="N�meros Omitidos">
                        <i class="fas fa-ban"></i>
                        <span>Omitidos</span>
                    </button>
                    <button class="panel-btn btn-logs" onclick="showLogsAPIModal()" title="Logs de API">
                        <i class="fas fa-list"></i>
                        <span>Logs</span>
                    </button>
                    <button class="panel-btn btn-admin" onclick="showUsersAdminModal()" title="Administrar Usuarios">
                        <i class="fas fa-users-cog"></i>
                        <span>Usuarios</span>
                    </button>
                    <button class="panel-btn btn-clear" onclick="clearAllChats()" title="Eliminar todos los chats">
                        <i class="fas fa-broom"></i>
                        <span>Limpiar Chats</span>
                    </button>
                </div>
                
            <!-- Bot�n Nuevo Chat -->
            <button class="new-chat-btn" onclick="showNewChatModal()" title="Iniciar nueva conversaci�n">
                    <i class="fas fa-plus"></i>
                    Nuevo Chat
                </button>
                
                <!-- Filtros de Chat -->
                <div class="chat-filters">
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-comments"></i> Todos
                        </button>
                        <button class="filter-btn" data-filter="bot">
                            <i class="fas fa-robot"></i> Bot
                        </button>
                        <button class="filter-btn" data-filter="human">
                            <i class="fas fa-user"></i> Humano
                        </button>
                </div>
            </div>
            
            <!-- Lista de Chats -->
            <div class="chat-list" id="chat-list">
                <!-- Los chats se cargar�n aqu� din�micamente -->
            </div>
        </div>

        <!-- �rea principal -->
        <div class="main-area">
            <!-- Estado vac�o por defecto -->
            <div class="empty-state" id="empty-state">
                <i class="fab fa-whatsapp"></i>
                <h3>Panel de Control WhatsApp</h3>
                <p>Selecciona un chat para comenzar a ver y enviar mensajes</p>
                <p style="margin-top: 15px; font-size: 0.85em;">
                    <strong>Modos disponibles:</strong><br>
                    ?? <span style="color: #007bff;">Bot</span> - Conversaciones autom�ticas<br>
                    ?? <span style="color: #28a745;">Humano</span> - Intervenci�n manual
                </p>
            </div>

            <!-- �rea de chat (oculta por defecto) -->
            <div class="chat-area" id="chat-area" style="display: none;">
                <div class="chat-header-main">
                    <button class="back-to-sidebar-btn" id="back-to-sidebar-btn" onclick="showSidebarFromChat()" title="Volver al Panel">
                        <i class="fas fa-arrow-left"></i>
                    </button>
                    <div class="chat-info">
                        <div class="chat-title" id="current-chat-name">Cliente</div>
                        <div class="chat-subtitle" id="current-chat-subtitle">En l�nea</div>
                </div>
                    <div class="chat-actions">
                        <button class="action-btn" id="refresh-messages-btn">
                            <i class="fas fa-sync-alt"></i> <span>Refrescar</span>
                        </button>
                        <button class="action-btn" id="toggle-mode-btn">
                            <i class="fas fa-exchange-alt"></i> <span>Cambiar Modo</span>
                        </button>
                        <button class="action-btn danger" id="end-chat-btn">
                            <i class="fas fa-times"></i> <span>Finalizar</span>
                        </button>
                    </div>
                </div>

                <div class="messages-area" id="messages-area">
                    <!-- Los mensajes se cargar�n aqu� -->
            </div>

                <div class="message-input-area" id="message-input-area">
                    <!-- �rea de preview de archivos -->
                    <div class="file-preview-area" id="file-preview-area" style="display: none;">
                        <div class="file-preview-list" id="file-preview-list">
                            <!-- Previews de archivos aparecer�n aqu� -->
                </div>
                        <button class="clear-files-btn" id="clear-files-btn">
                            <i class="fas fa-times"></i> Limpiar
                        </button>
                    </div>
                    
                    <div class="message-input-container">
                        <button class="attach-btn" id="attach-btn" title="Adjuntar archivo">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <button class="audio-btn" id="audio-btn" title="Grabar audio">
                            <i class="fas fa-microphone"></i>
                        </button>
                        <input type="file" id="file-input" style="display: none;" multiple 
                               accept="image/*,video/*,audio/*,.pdf,.doc,.docx,.txt,.zip,.rar">
                        <textarea 
                            class="message-input" 
                            id="message-input" 
                            placeholder="Escribe un mensaje..."
                            rows="1"
                        ></textarea>
                        <button class="send-btn" id="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                    
                    <!-- Overlay para drag and drop -->
                    <div class="drag-overlay" id="drag-overlay" style="display: none;">
                        <div class="drag-content">
                            <i class="fas fa-cloud-upload-alt"></i>
                            <p>Suelta los archivos aqu� para enviarlos</p>
                        </div>
                    </div>
                    </div>
                </div>
            </div>
        </div>

       
    <style>
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Asegurar que el modal QR sea visible sobre otros elementos */
    .qr-modal {
        backdrop-filter: blur(5px);
        border: 2px solid rgba(37, 211, 102, 0.3);
    }

    /* Animación de entrada para el modal QR */
    .qr-modal:not(.hidden) {
        animation: slideInFromRight 0.3s ease-out;
    }

    /* Animación de salida para el modal QR */
    .qr-modal.hidden {
        animation: slideOutToRight 0.2s ease-in;
    }

    @keyframes slideInFromRight {
        from {
            transform: translateX(100%);
            opacity: 0;
        }
        to {
            transform: translateX(0);
            opacity: 1;
        }
    }

    @keyframes slideOutToRight {
        from {
            transform: translateX(0);
            opacity: 1;
        }
        to {
            transform: translateX(100%);
            opacity: 0;
        }
    }
    </style>

    <!-- Modal para Dashboard de Salud del Bot -->
    <div class="omitted-modal hidden" id="health-dashboard-modal">
        <div class="omitted-content" style="max-width: 900px;">
            <div class="omitted-header">
                <h3><i class="fas fa-heartbeat"></i> Dashboard de Salud del Bot</h3>
                <button class="close-modal" onclick="closeHealthDashboard()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div style="padding: 20px;">
                <!-- Estado General -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; color: white;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <h4 style="margin: 0;"><i class="fas fa-robot"></i> Estado del Bot</h4>
                        <span id="health-status-badge" style="background: rgba(255,255,255,0.3); padding: 5px 15px; border-radius: 20px; font-size: 0.9em;">Cargando...</span>
                    </div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div>
                            <div style="opacity: 0.8; font-size: 0.85em;">Estado WhatsApp</div>
                            <div id="health-whatsapp-state" style="font-size: 1.2em; font-weight: bold; margin-top: 5px;">-</div>
                        </div>
                        <div>
                            <div style="opacity: 0.8; font-size: 0.85em;">Tiempo Activo</div>
                            <div id="health-uptime" style="font-size: 1.2em; font-weight: bold; margin-top: 5px;">-</div>
                        </div>
                        <div>
                            <div style="opacity: 0.8; font-size: 0.85em;">Chats Activos</div>
                            <div id="health-active-chats" style="font-size: 1.2em; font-weight: bold; margin-top: 5px;">-</div>
                        </div>
                    </div>
                </div>

                <!-- Mensajes y Errores -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    <!-- Mensajes Exitosos -->
                    <div style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); border-radius: 12px; padding: 20px; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="opacity: 0.9; font-size: 0.85em;">Mensajes Exitosos</div>
                                <div id="health-success-count" style="font-size: 2em; font-weight: bold; margin-top: 5px;">0</div>
                                <div id="health-success-rate" style="opacity: 0.8; font-size: 0.9em; margin-top: 5px;">0% tasa de éxito</div>
                            </div>
                            <i class="fas fa-check-circle" style="font-size: 3em; opacity: 0.3;"></i>
                        </div>
                    </div>

                    <!-- Mensajes Fallidos -->
                    <div style="background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%); border-radius: 12px; padding: 20px; color: white;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <div style="opacity: 0.9; font-size: 0.85em;">Mensajes Fallidos</div>
                                <div id="health-error-count" style="font-size: 2em; font-weight: bold; margin-top: 5px;">0</div>
                                <div id="health-error-rate" style="opacity: 0.8; font-size: 0.9em; margin-top: 5px;">0% tasa de error</div>
                            </div>
                            <i class="fas fa-exclamation-triangle" style="font-size: 3em; opacity: 0.3;"></i>
                        </div>
                    </div>
                </div>

                <!-- Límites Diarios -->
                <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h4 style="margin: 0 0 15px 0; color: #2d3748;"><i class="fas fa-chart-line"></i> Uso de Límites</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <!-- Límite Diario -->
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: #4a5568; font-size: 0.9em;">Mensajes Hoy</span>
                                <span id="health-daily-count" style="font-weight: bold; color: #2d3748;">0 / 300</span>
                            </div>
                            <div style="background: #e2e8f0; border-radius: 10px; height: 12px; overflow: hidden;">
                                <div id="health-daily-bar" style="background: linear-gradient(90deg, #4299e1, #3182ce); height: 100%; width: 0%; transition: width 0.3s;"></div>
                            </div>
                            <div id="health-daily-percentage" style="text-align: right; margin-top: 5px; font-size: 0.85em; color: #718096;">0%</div>
                        </div>

                        <!-- Límite por Hora -->
                        <div>
                            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                                <span style="color: #4a5568; font-size: 0.9em;">Mensajes Esta Hora</span>
                                <span id="health-hourly-count" style="font-weight: bold; color: #2d3748;">0 / 120</span>
                            </div>
                            <div style="background: #e2e8f0; border-radius: 10px; height: 12px; overflow: hidden;">
                                <div id="health-hourly-bar" style="background: linear-gradient(90deg, #48bb78, #38a169); height: 100%; width: 0%; transition: width 0.3s;"></div>
                            </div>
                            <div id="health-hourly-percentage" style="text-align: right; margin-top: 5px; font-size: 0.85em; color: #718096;">0%</div>
                        </div>
                    </div>
                </div>

                <!-- Alertas Activas -->
                <div id="health-alerts-container" style="display: none; background: #fff3cd; border: 2px solid #ffc107; border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #856404;"><i class="fas fa-exclamation-triangle"></i> Alertas Activas</h4>
                    <div id="health-alerts-list" style="color: #856404; font-size: 0.9em;"></div>
                </div>

                <!-- Último Error -->
                <div id="health-last-error-container" style="display: none; background: #f8d7da; border: 2px solid #f5c6cb; border-radius: 12px; padding: 15px; margin-bottom: 20px;">
                    <h4 style="margin: 0 0 10px 0; color: #721c24;"><i class="fas fa-bug"></i> Último Error</h4>
                    <div id="health-last-error-details" style="color: #721c24; font-size: 0.85em; font-family: monospace;"></div>
                </div>

                <!-- Mensajes del Chatbot -->
                <div style="background: white; border-radius: 12px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <h4 style="margin: 0 0 15px 0; color: #2d3748;"><i class="fas fa-comments"></i> Mensajes Recientes del Chatbot</h4>
                    <div id="health-chatbot-messages" style="max-height: 400px; overflow-y: auto;">
                        <!-- Los mensajes se cargarán aquí -->
                    </div>
                </div>

                <!-- Botón de Actualizar -->
                <div style="text-align: center; margin-top: 20px;">
                    <button onclick="refreshHealthDashboard()" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: bold; box-shadow: 0 4px 12px rgba(0,0,0,0.15);">
                        <i class="fas fa-sync-alt"></i> Actualizar Datos
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para n�meros omitidos -->
    <div class="omitted-modal hidden" id="omitted-modal">
        <div class="omitted-content">
            <div class="omitted-header">
                <h3><i class="fas fa-user-slash"></i> N�meros Omitidos</h3>
                <button class="close-modal" onclick="closeOmittedModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="omitted-form">
                <h4 style="margin: 0 0 15px 0; color: #2d3748; font-size: 1.1em;">Agregar nuevo n�mero omitido</h4>
                <div class="form-row">
                    <input type="text" id="omitted-number" placeholder="N�mero (ej: 573001234567)" maxlength="20">
                    <button class="panel-btn btn-omitted" onclick="agregarNumeroOmitido()" style="flex-shrink: 0;">
                        <i class="fas fa-plus"></i> Agregar
                    </button>
                </div>
                <textarea id="omitted-reason" placeholder="Motivo por el cual se omite este n�mero (opcional)" rows="2"></textarea>
            </div>

            <!-- Barra de búsqueda -->
            <div class="omitted-search-container">
                <input type="text"
                       id="omitted-search"
                       class="omitted-search-input"
                       placeholder="Buscar números, motivos o usuarios..."
                       onkeyup="filterOmittedNumbers()"
                       onkeydown="handleOmittedSearchKeydown(event)"
                       autocomplete="off">
                <button class="omitted-clear-search" id="omitted-clear-search" onclick="clearOmittedSearch()">
                    <i class="fas fa-times"></i>
                </button>
                <i class="fas fa-search omitted-search-icon"></i>
                <div class="omitted-search-stats" id="omitted-search-stats"></div>
            </div>

            <div class="omitted-list" id="omitted-list">
                <!-- Lista de n�meros omitidos se cargar� aqu� -->
            </div>
        </div>
    </div>

    <!-- Modal para administraci�n de usuarios -->
    <div class="users-admin-modal hidden" id="users-admin-modal">
        <div class="omitted-content" style="max-width: 700px;">
            <div class="omitted-header">
                <h3><i class="fas fa-users-cog"></i> Administraci�n de Usuarios</h3>
                <button class="close-modal" onclick="closeUsersAdminModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Bot�n para agregar nuevo usuario -->
            <div style="text-align: center; margin: 15px 0; padding: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px;">
                <button class="panel-btn" onclick="showAddUserModal()" style="background: white; color: #667eea; border: none; padding: 10px 20px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: all 0.3s ease;">
                    <i class="fas fa-user-plus"></i> Agregar Nuevo Usuario
                </button>
            </div>

            <div class="omitted-list" id="users-admin-list">
                <!-- Lista de usuarios se cargar� aqu� -->
            </div>
        </div>
    </div>

    <!-- Modal para editar usuarios -->
    <div class="edit-user-modal hidden" id="edit-user-modal">
        <div class="omitted-content" style="max-width: 500px;">
            <div class="omitted-header">
                <h3><i class="fas fa-user-edit"></i> Editar Usuario</h3>
                <button class="close-modal" onclick="closeEditUserModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="omitted-form">
                <input type="hidden" id="edit-user-id">
                <input type="text" id="edit-user-username" placeholder="Nombre de usuario" maxlength="50" style="width: 100%; margin-bottom: 10px;">
                <input type="password" id="edit-user-password" placeholder="Nueva contrase�a (opcional)" maxlength="100" style="width: 100%; margin-bottom: 10px;">
                <select id="edit-user-role" style="width: 100%; margin-bottom: 10px; padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                        <option value="soporte">Soporte</option>
                        <option value="admin">Administrador</option>
                    </select>
                <input type="text" id="edit-user-nombre" placeholder="Nombre completo" style="width: 100%; margin-bottom: 15px;">
                <div style="text-align: center;">
                    <button class="panel-btn btn-admin" onclick="actualizarUsuario()" style="padding: 10px 25px; font-size: 0.9em;">
                        <i class="fas fa-save"></i> Actualizar Usuario
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para agregar nuevos usuarios -->
    <div class="add-user-modal hidden" id="add-user-modal">
        <div class="omitted-content" style="max-width: 500px;">
            <div class="omitted-header">
                <h3><i class="fas fa-user-plus"></i> Agregar Nuevo Usuario</h3>
                <button class="close-modal" onclick="closeAddUserModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="omitted-form">
                <input type="text" id="new-user-username" placeholder="Nombre de usuario" maxlength="50" style="width: 100%; margin-bottom: 10px;">
                <input type="password" id="new-user-password" placeholder="Contrase�a" maxlength="100" style="width: 100%; margin-bottom: 10px;">
                <select id="new-user-role" style="width: 100%; margin-bottom: 10px; padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px;">
                        <option value="soporte">Soporte</option>
                        <option value="admin">Administrador</option>
                    </select>
                <input type="text" id="new-user-nombre" placeholder="Nombre completo" style="width: 100%; margin-bottom: 15px;">
                <div style="text-align: center;">
                    <button class="panel-btn btn-admin" onclick="agregarUsuario()" style="padding: 10px 25px; font-size: 0.9em; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; border-radius: 8px;">
                        <i class="fas fa-save"></i> Crear Usuario
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para nuevo chat -->
    <div class="new-chat-modal hidden" id="new-chat-modal">
        <div class="omitted-content" style="max-width: 400px;">
            <div class="omitted-header">
                <h3><i class="fas fa-plus"></i> Nuevo Chat</h3>
                <button class="close-modal" onclick="closeNewChatModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="omitted-form">
                <div style="margin-bottom: 15px;">
                    <label for="new-chat-phone" style="display: block; margin-bottom: 5px; font-weight: bold;">Número de teléfono:</label>
                    <div style="display: flex; align-items: center; gap: 5px;">
                        <span style="padding: 8px 12px; background: #f8f9fa; border: 2px solid #e2e8f0; border-radius: 8px 0 0 8px; color: #666;">+57</span>
                        <input type="tel" id="new-chat-phone" placeholder="3001234567" maxlength="10" 
                               style="flex: 1; padding: 8px 12px; border: 2px solid #e2e8f0; border-left: none; border-radius: 0 8px 8px 0;">
                    </div>
                    <small style="color: #666; font-size: 0.8em;">Solo ingresa los 10 dígitos del número móvil</small>
                </div>

                <div style="margin-bottom: 15px;">
                    <label for="new-chat-message" style="display: block; margin-bottom: 5px; font-weight: bold;">Mensaje inicial:</label>
                    <textarea id="new-chat-message" placeholder="Escribe el primer mensaje..." rows="3"
                              style="width: 100%; padding: 8px 12px; border: 2px solid #e2e8f0; border-radius: 8px; resize: vertical; min-height: 60px;"></textarea>
                </div>

                <div style="text-align: center; display: flex; gap: 10px;">
                    <button class="panel-btn" onclick="closeNewChatModal()" 
                            style="flex: 1; padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 8px;">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                    <button class="panel-btn btn-admin" onclick="createNewChat()" id="create-chat-btn"
                            style="flex: 1; padding: 10px 20px; background: #28a745; color: white; border: none; border-radius: 8px;">
                        <i class="fas fa-paper-plane"></i> Enviar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para logs de API -->
    <div class="logs-api-modal hidden" id="logs-api-modal">
        <div class="omitted-content" style="max-width: 900px;">
            <div class="omitted-header">
                <h3><i class="fas fa-history"></i> Logs de API</h3>
                <button class="close-modal" onclick="closeLogsAPIModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <select id="logs-filter-estado" onchange="loadLogsAPI()" style="padding: 6px 10px; border: 2px solid #e2e8f0; border-radius: 6px; font-size: 0.8em;">
                        <option value="">Todos los estados</option>
                        <option value="enviado">Enviado</option>
                        <option value="error_envio">Error de env�o</option>
                        <option value="error_parametros">Error de par�metros</option>
                        <option value="error_whatsapp_no_listo">WhatsApp no listo</option>
                        <option value="error_excepcion">Error de excepci�n</option>
                    </select>
                    <button class="panel-btn btn-logs" onclick="loadLogsAPI()" style="padding: 6px 12px; font-size: 0.8em;">
                        <i class="fas fa-sync-alt"></i> Actualizar
                    </button>
                </div>
                <div style="font-size: 0.8em; color: #666;">
                    �ltimos 100 registros
                </div>
            </div>

            <div class="omitted-list" id="logs-api-list">
                <!-- Lista de logs se cargar� aqu� -->
            </div>
        </div>
    </div>

    <!-- Modal para nuevo chat -->
    <div class="new-chat-modal hidden" id="new-chat-modal">
        <div class="new-chat-content">
            <div class="new-chat-header">
                <h3><i class="fas fa-comment-dots"></i> Nuevo Chat</h3>
                <button class="close-modal" onclick="closeNewChatModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <form class="new-chat-form" onsubmit="createNewChat(event)">
                <div>
                    <label for="new-chat-number" style="display: block; margin-bottom: 6px; font-weight: 600; color: #4a5568; font-size: 0.9em;">
                        N�mero de tel�fono <span style="color: #e53e3e;">*</span>
                    </label>
                    <input 
                        type="text" 
                        id="new-chat-number" 
                        placeholder="Ej: 573001234567" 
                        required
                        pattern="[0-9]{10,15}"
                        title="Ingresa un n�mero v�lido (solo d�gitos, 10-15 caracteres)"
                    >
                    <small style="color: #718096; font-size: 0.75em; display: block; margin-top: 4px;">
                        Formato: c�digo pa�s + n�mero (sin espacios ni s�mbolos)
                    </small>
                </div>
                
                <div>
                    <label for="new-chat-message" style="display: block; margin-bottom: 6px; font-weight: 600; color: #4a5568; font-size: 0.9em;">
                        Mensaje inicial (opcional)
                    </label>
                    <textarea 
                        id="new-chat-message" 
                        placeholder="Si no escribes nada, se enviar�: 'Buenos d�as, Bienvenido a SOLUCNET'"
                        rows="3"
                    ></textarea>
                </div>

                <div class="new-chat-actions">
                    <button type="button" class="btn-cancel" onclick="closeNewChatModal()">
                        Cancelar
                    </button>
                    <button type="submit" class="btn-new-chat">
                        <i class="fas fa-paper-plane"></i>
                        Crear Chat
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- �rea de notificaciones -->
    <div id="notifications"></div>

