<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prueba de Tabla - Visitas Sin Asignar</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Estilos para la tabla mejorada */
        #tablaVisitasSinAsignar {
            font-size: 0.9rem;
            margin-bottom: 0;
        }

        #tablaVisitasSinAsignar td {
            padding: 15px 10px;
            vertical-align: middle;
            border-top: 1px solid #dee2e6;
        }

        #tablaVisitasSinAsignar th {
            padding: 12px 10px;
            font-weight: 600;
            background-color: #212529 !important;
            color: white !important;
            border-bottom: 2px solid #dee2e6;
            border-top: none;
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        #tablaVisitasSinAsignar .btn {
            padding: 8px 12px;
            margin: 0 2px;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.2s ease;
        }

        .status-programada {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
        }

        .status-asignada {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container mt-4">
        <h1>ðŸ§ª Prueba de Tabla - Visitas Sin Asignar</h1>

        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5><i class="fas fa-table"></i> Tabla de Prueba</h5>
            </div>
            <div class="card-body p-0">
                <div id="tablaVisitas">
                    <div class="p-4 text-center">
                        <p class="text-muted">Cargando datos de prueba...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Datos de prueba directos
        let visitasProgramadas = [
            {
                id: 1,
                cliente_nombre: 'VICTOR ALFONOZ SUAREZ',
                cliente_cedula: '12345678',
                cliente_telefono: '3001234567',
                cliente_movil: '3001234567',
                cliente_direccion: 'Calle 123 #45-67',
                fecha_programada: '2025-01-15',
                motivo_visita: 'InstalaciÃ³n de servicio',
                notas_admin: 'Cliente nuevo, primera instalaciÃ³n',
                estado: 'programada',
                mikrotik_nombre: 'Server_Principal',
                usuario_ppp: 'victor.alfonoz',
                seleccionada: false
            },
            {
                id: 2,
                cliente_nombre: 'MARIA RODRIGUEZ LOPEZ',
                cliente_cedula: '87654321',
                cliente_telefono: '3009876543',
                fecha_programada: '2025-01-16',
                motivo_visita: 'ReparaciÃ³n de equipo',
                notas_admin: 'Problema con conectividad',
                estado: 'asignada',
                mikrotik_nombre: 'Server_Zona2',
                usuario_ppp: 'maria.rodriguez',
                seleccionada: false
            }
        ];

        function actualizarTablaVisitas() {
            const tablaVisitas = document.getElementById('tablaVisitas');

            const html = `
                <div class="table-responsive">
                    <table class="table table-striped table-hover" id="tablaVisitasSinAsignar">
                        <thead class="table-dark">
                            <tr>
                                <th style="width: 40px;">
                                    <input type="checkbox" class="form-check-input">
                                </th>
                                <th style="min-width: 200px;">Cliente</th>
                                <th style="width: 120px;">Fecha</th>
                                <th style="width: 140px;">MikroTik</th>
                                <th style="min-width: 180px;">Motivo</th>
                                <th style="min-width: 150px;">ObservaciÃ³n</th>
                                <th style="width: 100px;">Estado</th>
                                <th style="width: 200px;">Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${visitasProgramadas.map((visita, index) => `
                                <tr>
                                    <td class="text-center">
                                        <input type="checkbox" class="form-check-input">
                                    </td>
                                    <td>
                                        <div class="fw-bold text-primary">${visita.cliente_nombre}</div>
                                        <small class="text-muted">
                                            <i class="fas fa-id-card me-1"></i>${visita.cliente_cedula}
                                        </small>
                                        ${visita.cliente_telefono ? `<br><small class="text-muted"><i class="fas fa-phone me-1"></i>${visita.cliente_telefono}</small>` : ''}
                                    </td>
                                    <td>
                                        <div class="fw-semibold">${new Date(visita.fecha_programada).toLocaleDateString('es-ES', {
                                            day: '2-digit',
                                            month: '2-digit',
                                            year: 'numeric'
                                        })}</div>
                                        <small class="text-muted">${new Date(visita.fecha_programada).toLocaleDateString('es-ES', {
                                            weekday: 'short'
                                        })}</small>
                                    </td>
                                    <td>
                                        <div class="text-info">
                                            <i class="fas fa-router me-1"></i>
                                            <span class="small">${visita.mikrotik_nombre || 'Sin especificar'}</span>
                                        </div>
                                        ${visita.usuario_ppp ? `<small class="text-success"><i class="fas fa-user me-1"></i>${visita.usuario_ppp}</small>` : ''}
                                    </td>
                                    <td>
                                        <div class="text-wrap" style="max-width: 180px; white-space: normal; line-height: 1.3;">
                                            <span class="small">${visita.motivo_visita}</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-wrap" style="max-width: 150px; white-space: normal; line-height: 1.3;">
                                            <span class="small text-muted">${visita.notas_admin || 'Sin observaciÃ³n'}</span>
                                        </div>
                                    </td>
                                    <td class="text-center">
                                        <span class="badge status-${visita.estado} fs-6">${visita.estado}</span>
                                    </td>
                                    <td>
                                        <div class="d-flex flex-wrap gap-1 justify-content-center">
                                            <button class="btn btn-primary btn-sm" title="Asignar tÃ©cnico">
                                                <i class="fas fa-user-plus"></i>
                                            </button>
                                            <button class="btn btn-warning btn-sm" title="Editar visita">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <div class="dropdown">
                                                <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button" data-bs-toggle="dropdown">
                                                    <i class="fas fa-ellipsis-v"></i>
                                                </button>
                                                <ul class="dropdown-menu">
                                                    <li><a class="dropdown-item" href="#">
                                                        <i class="fas fa-eye me-2"></i>Ver detalles
                                                    </a></li>
                                                    <li><a class="dropdown-item" href="#">
                                                        <i class="fas fa-print me-2"></i>Imprimir orden
                                                    </a></li>
                                                    <li><a class="dropdown-item text-danger" href="#">
                                                        <i class="fas fa-trash me-2"></i>Eliminar
                                                    </a></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;

            tablaVisitas.innerHTML = html;
        }

        // Cargar datos al inicializar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ðŸ§ª Cargando tabla de prueba...');
            actualizarTablaVisitas();
            console.log('âœ… Tabla cargada con', visitasProgramadas.length, 'visitas');
        });
    </script>
</body>
</html>